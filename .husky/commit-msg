#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

# è®¾ç½®é¢œè‰²å˜é‡
RED='\033[31m'
GREEN='\033[32m'
YELLOW='\033[33m'
NC='\033[0m'

echo -e "\r${YELLOW}âŒ›ï¸ running commit-msg checks ...${NC}\c"

npm run commitlint

## é’©å­è„šæœ¬æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³åŒ…å« commit message çš„ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„
#commit_message_file="$1"
## è¯»å–æäº¤ä¿¡æ¯
#commit_message=$(<"$commit_message_file")
#
#sleep 1
#
## æ£€æŸ¥æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒ
#if ! echo "$commit_message" | grep -qE '^(feat|fix|docs|style|refactor|perf|test|chore|revert|ci)(\(.+\))?:\s{1}[^ ]{1}.+$'; then
#  echo -e "\r${RED}â—ï¸ Error: Commit message does not match the required pattern.${NC}\r\n"
#  exit 1
#fi

echo -e "\r${GREEN}ğŸ‰ commit-msg executed successfully!\r\n${NC}"
